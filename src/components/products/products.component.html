<section id="products" class="py-16 md:py-24 bg-gray-50 dark:bg-[#1a1a1a]">
  <div class="container mx-auto px-6">
    <h2 class="text-3xl md:text-4xl font-bold text-center mb-12 text-[#760F10] dark:text-[#E49D07]">
      {{ t().productsTitle }}
    </h2>

    @if (isLoading()) {
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
        @for (_ of [1,2,3,4,5,6,7,8]; track $index) {
          <app-skeleton-card></app-skeleton-card>
        }
      </div>
    } @else if (featuredProducts().length > 0) {
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
        @for (product of featuredProducts(); track product.name) {
          <app-product-card [product]="product" [isSelected]="selectedProduct() === product" (view)="openModal($event)"></app-product-card>
        }
      </div>
    } @else {
      <div class="text-center py-12">
        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path vector-effect="non-scaling-stroke" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h12a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2z" />
        </svg>
        <h3 class="mt-2 text-sm font-medium text-gray-900 dark:text-white">No products found</h3>
        <p class="mt-1 text-sm text-gray-500">Products are being loaded or are currently unavailable.</p>
      </div>
    }

    @if (products().length > 8) {
      <div class="mt-16 text-center">
        <button (click)="viewGallery()" class="inline-flex items-center gap-3 bg-[#760F10] text-white font-bold py-3 px-8 rounded-lg text-base hover:bg-opacity-90 dark:bg-[#E49D07] dark:text-black dark:hover:bg-opacity-90 transition-all transform hover:scale-105">
          <span>{{ t().viewAllProducts }}</span>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 rtl:scale-x-[-1]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3" />
          </svg>
        </button>
      </div>
    }
  </div>
</section>

@if (selectedProduct(); as product) {
  <app-image-modal [product]="product" (close)="closeModal()"></app-image-modal>
}